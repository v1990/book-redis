# 原理与实现


## 单线程架构

一条命令到达服务端之后不会立刻被执行，
所有命令都会进入一个队列中，
然后逐个被执行。

redis单线程原因：
1. 纯内存访问
2. 非阻塞IO，使用epoll作为IO多路复用模型，加上redis自身的事件处理模型将epoll中的连接/读写/关闭都转换为事件，不在网络IO上浪费过多的时间
3. 单线程避免了**线程切换**和**竟态**产生的消耗

单线程问题：
1. 对于每个命令的执行时间有要求，如果一个命令执行时间过长，会造成其他命令的阻塞
所以redis是面向快速执行场景的数据库
